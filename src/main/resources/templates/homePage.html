<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Title</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script>
        successHandle();
        // getAllPublisher();
        // getAllType();
        function successHandle() {
            $.ajax({
                type: "GET",
                url: "/rooms/customer",
                success: function (data) {
                    let content = '<tr>\n' +
                        '        <th>Image</th>\n' +
                        '        <th>Name</th>\n' +
                        '        <th>Buy</th>\n' +
                        '    </tr>\n';
                    for (let i = 0; i < data.length; i++) {
                        content += '    <tr>\n' +
                            '       <td><img src="' + data[i].image + '" alt=""></td>\n' +
                            '       <td>' + data[i].name + '</td>\n' +
                            '       <td><button value="' + data[i].id + '" onclick="comeIn(this)">Come In</button></td>\n' +
                            '    </tr>';
                    }
                    document.getElementById("roomList").innerHTML = content;

                }
            });
        }

        function insertMoney() {
            let amount = $("#moneyAmount").val();
            $.ajax({
                type: "PUT",
                url: "/customers/updateMoney?amount=" + amount,
                success: successHandle
            });
        }

        function addNewBook() {
            $.ajax({
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                type: "POST",
                url: "/customers"

            })

        }

        function showAllBook() {

        }

        function showAllPublisher() {
            let content = '';
            $.ajax({
                type: "GET",
                url: "/publishers",
                success: function (data) {
                    for (let i = 0; i < data.length; i++) {
                        content += '<option id="publisher" value="' + data[i].id + '">' + data[i].name + '</option>\n';
                    }
                }
            });
            return content;
        }
        function getAllPublisher(){
            document.getElementById("publisher").innerHTML = showAllPublisher();
        }


        function showAllType() {
            let content = '';
            $.ajax({
                type: "GET",
                url: "/types",
                success: function (data) {
                    for (let i = 0; i < data.length; i++) {
                        content += '<option id="type" value="' + data[i].id + '">' + data[i].name + '</option>\n';
                    }

                }
            });
            return content;
        }
        function getAllType(){
            document.getElementById("type").innerHTML = showAllType();
        }



    </script>
</head>
<body>
<!--<h1>WELCOME </h1>-->
<!--<h3 th:text="'WELCOME'+${customer.name}"></h3>-->
<!--<h2 th:text="'Balance'+${customer.money}"></h2>-->

<!--<h3><button onclick="addNewBook()">New Book</button></h3>-->
<input id="moneyAmount" type="text" placeholder="">
<h3>
    <button onclick="insertMoney()">ATM</button>
</h3>
<h3>
    <button onclick="showAllBook()">Bag</button>
</h3>


<!-- Button trigger modal -->
<button onclick="addNewBook()" type="button" class="btn btn-primary" data-bs-toggle="modal"
        data-bs-target="#exampleModal">
    New Book
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label class="form-label">Description</label>
                    <input type="text" class="form-control" id="description" placeholder="Description">
                </div>
                <div class="mb-3">
                    <label class="form-label">Name</label>
                    <input type="text" class="form-control" id="name" placeholder="Name">
                </div>
                <div class="mb-3">
                    <label class="form-label">NEW?</label>
                    <input type="checkbox" value="New" class="form-control" id="status">
                </div>
                <div class="mb-3">
                    <select id="publisher">

                    </select>
                </div>
                <div class="mb-3">
                    <select id="type">

                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>


<table border="1" id="roomList">
    <!--    <tr>-->
    <!--        <th>Image</th>-->
    <!--        <th>Name</th>-->
    <!--        <th>Buy</th>-->
    <!--    </tr>-->
    <!--    <tr>-->
    <!--       <td></td>-->
    <!--       <td></td>-->
    <!--       <td><button onclick="comeIn()"></button></td>-->
    <!--    </tr>-->
</table>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
</body>
</html>